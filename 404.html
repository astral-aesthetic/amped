<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
      // GitHub Pages SPA redirect for subdirectory deployment
      // This handles routes like /amped/trending by redirecting to /amped/?/trending
      var pathSegmentsToKeep = 1; // Keep 1 segment for /amped
      var l = window.location;
      
      // Build the redirect URL
      var pathArray = l.pathname.split('/').filter(function(segment) {
        return segment !== '';
      });
      
      // If we're in a subdirectory and have additional path segments
      if (pathArray.length > pathSegmentsToKeep) {
        var basePath = '/' + pathArray.slice(0, pathSegmentsToKeep).join('/');
        var routePath = pathArray.slice(pathSegmentsToKeep).join('/');
        
        var redirectUrl = l.protocol + '//' + l.hostname + 
          (l.port ? ':' + l.port : '') + 
          basePath + '/?/' + routePath +
          (l.search ? '&' + l.search.slice(1).replace(/&/g, '~and~') : '') +
          l.hash;
        
        l.replace(redirectUrl);
      } else {
        // If we're at the root or base path, just go to index
        l.replace(l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') + 
          '/' + pathArray.slice(0, pathSegmentsToKeep).join('/') + '/');
      }
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
  </body>
</html>
